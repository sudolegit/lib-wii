<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wii Library: wii_lib.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Wii Library
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('wii__lib_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">wii_lib.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implements functions used to abstract away interacting with Wii devices over I2C.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;i2c.h&quot;</code><br />
<code>#include &quot;<a class="el" href="wii__lib_8h_source.html">wii_lib.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for wii_lib.c:</div>
<div class="dyncontent">
<div class="center"><img src="wii__lib_8c__incl.png" border="0" usemap="#wii__lib_8c" alt=""/></div>
<!-- MAP 0 -->
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88416ab373070607a6f41dee57f2d517"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="wii__lib_8h.html#ac6864ade60c65429fd5ab9740930d08c">WII_LIB_TARGET_DEVICE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wii__lib_8c.html#a88416ab373070607a6f41dee57f2d517">WiiLib_DetermineDeviceType</a> (<a class="el" href="wii__lib_8h.html#a90cbcd881a70e1fde0306efb5228fdf3">WiiLib_Device</a> *device)</td></tr>
<tr class="memdesc:a88416ab373070607a6f41dee57f2d517"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the process of decrypting data received from a target device.  <a href="#a88416ab373070607a6f41dee57f2d517">More...</a><br /></td></tr>
<tr class="separator:a88416ab373070607a6f41dee57f2d517"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a975203344b3223270889adfe8bc28b14"><td class="memItemLeft" align="right" valign="top">static BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wii__lib_8c.html#a975203344b3223270889adfe8bc28b14">WiiLib_ValidateDataReceived</a> (uint8_t *data, uint32_t len)</td></tr>
<tr class="memdesc:a975203344b3223270889adfe8bc28b14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verifies the data provided is not a known set of invalid byte(s).  <a href="#a975203344b3223270889adfe8bc28b14">More...</a><br /></td></tr>
<tr class="separator:a975203344b3223270889adfe8bc28b14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa69c759411925b0982a02da32c85890e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="wii__lib_8h.html#ad1e7b3ff86d03947a332cd82be615a02">WII_LIB_RC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wii__lib_8c.html#aa69c759411925b0982a02da32c85890e">WiiLib_Decrypt</a> (uint8_t *data, int8_t len)</td></tr>
<tr class="memdesc:aa69c759411925b0982a02da32c85890e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the process of decrypting data received from a target device.  <a href="#aa69c759411925b0982a02da32c85890e">More...</a><br /></td></tr>
<tr class="separator:aa69c759411925b0982a02da32c85890e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad241b45d69099b34e33ce9d56f8ecdd"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="wii__lib_8h.html#ad1e7b3ff86d03947a332cd82be615a02">WII_LIB_RC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wii__lib_8c.html#aad241b45d69099b34e33ce9d56f8ecdd">WiiLib_UpdateInterfaceTracking</a> (<a class="el" href="wii__lib_8h.html#a90cbcd881a70e1fde0306efb5228fdf3">WiiLib_Device</a> *device)</td></tr>
<tr class="memdesc:aad241b45d69099b34e33ce9d56f8ecdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper to invoke the appropriate target-specific processing function to interpret the current status data.  <a href="#aad241b45d69099b34e33ce9d56f8ecdd">More...</a><br /></td></tr>
<tr class="separator:aad241b45d69099b34e33ce9d56f8ecdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39366dd2388ce824b8307ea8158eab1d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="wii__lib_8h.html#ad1e7b3ff86d03947a332cd82be615a02">WII_LIB_RC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wii__lib_8c.html#a39366dd2388ce824b8307ea8158eab1d">WiiLib_Init</a> (I2C_MODULE module, uint32_t pbClk, <a class="el" href="wii__lib_8h.html#ac6864ade60c65429fd5ab9740930d08c">WII_LIB_TARGET_DEVICE</a> target, BOOL decryptData, <a class="el" href="wii__lib_8h.html#a90cbcd881a70e1fde0306efb5228fdf3">WiiLib_Device</a> *device)</td></tr>
<tr class="memdesc:a39366dd2388ce824b8307ea8158eab1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the Wii target device (e.g. nunchuck).  <a href="#a39366dd2388ce824b8307ea8158eab1d">More...</a><br /></td></tr>
<tr class="separator:a39366dd2388ce824b8307ea8158eab1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a351e727ad63aec8dd05b8209ffa44adf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="wii__lib_8h.html#ad1e7b3ff86d03947a332cd82be615a02">WII_LIB_RC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wii__lib_8c.html#a351e727ad63aec8dd05b8209ffa44adf">WiiLib_ConnectToTarget</a> (<a class="el" href="wii__lib_8h.html#a90cbcd881a70e1fde0306efb5228fdf3">WiiLib_Device</a> *device)</td></tr>
<tr class="memdesc:a351e727ad63aec8dd05b8209ffa44adf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempts to connect to target device.  <a href="#a351e727ad63aec8dd05b8209ffa44adf">More...</a><br /></td></tr>
<tr class="separator:a351e727ad63aec8dd05b8209ffa44adf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a142d45ef18cbb69d8ffd2cfac5f591a5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="wii__lib_8h.html#ad1e7b3ff86d03947a332cd82be615a02">WII_LIB_RC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wii__lib_8c.html#a142d45ef18cbb69d8ffd2cfac5f591a5">WiiLib_ConfigureDevice</a> (<a class="el" href="wii__lib_8h.html#a90cbcd881a70e1fde0306efb5228fdf3">WiiLib_Device</a> *device)</td></tr>
<tr class="memdesc:a142d45ef18cbb69d8ffd2cfac5f591a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pushes out configuration to target device.  <a href="#a142d45ef18cbb69d8ffd2cfac5f591a5">More...</a><br /></td></tr>
<tr class="separator:a142d45ef18cbb69d8ffd2cfac5f591a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f1a4a0b9edfea52390b8bf07a9fef1f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="wii__lib_8h.html#ad1e7b3ff86d03947a332cd82be615a02">WII_LIB_RC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wii__lib_8c.html#a3f1a4a0b9edfea52390b8bf07a9fef1f">WiiLib_QueryParameter</a> (<a class="el" href="wii__lib_8h.html#a90cbcd881a70e1fde0306efb5228fdf3">WiiLib_Device</a> *device, <a class="el" href="wii__lib_8h.html#a58a6ebe9b45f82cd1a973f2b83dfcf70">WII_LIB_PARAM</a> param)</td></tr>
<tr class="memdesc:a3f1a4a0b9edfea52390b8bf07a9fef1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hanldes process of initiating and reading the response for querying a parameter value from the target device.  <a href="#a3f1a4a0b9edfea52390b8bf07a9fef1f">More...</a><br /></td></tr>
<tr class="separator:a3f1a4a0b9edfea52390b8bf07a9fef1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4aaae06500be0c8bfb9b12f05752f48"><td class="memItemLeft" align="right" valign="top"><a class="el" href="wii__lib_8h.html#ad1e7b3ff86d03947a332cd82be615a02">WII_LIB_RC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wii__lib_8c.html#ae4aaae06500be0c8bfb9b12f05752f48">WiiLib_PollStatus</a> (<a class="el" href="wii__lib_8h.html#a90cbcd881a70e1fde0306efb5228fdf3">WiiLib_Device</a> *device)</td></tr>
<tr class="memdesc:ae4aaae06500be0c8bfb9b12f05752f48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Refreshes tracking values for the target device's status bits.  <a href="#ae4aaae06500be0c8bfb9b12f05752f48">More...</a><br /></td></tr>
<tr class="separator:ae4aaae06500be0c8bfb9b12f05752f48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97062879138116ad48b5fd89682d6c48"><td class="memItemLeft" align="right" valign="top"><a class="el" href="wii__lib_8h.html#ad1e7b3ff86d03947a332cd82be615a02">WII_LIB_RC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wii__lib_8c.html#a97062879138116ad48b5fd89682d6c48">WiiLib_SetNewHomePosition</a> (<a class="el" href="wii__lib_8h.html#a90cbcd881a70e1fde0306efb5228fdf3">WiiLib_Device</a> *device)</td></tr>
<tr class="memdesc:a97062879138116ad48b5fd89682d6c48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Refreshes tracking values for the target device's status bits.  <a href="#a97062879138116ad48b5fd89682d6c48">More...</a><br /></td></tr>
<tr class="separator:a97062879138116ad48b5fd89682d6c48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa178a16f4a1bce3804a80f0ee01e45ee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="wii__lib_8h.html#ad1e7b3ff86d03947a332cd82be615a02">WII_LIB_RC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wii__lib_8c.html#aa178a16f4a1bce3804a80f0ee01e45ee">WiiLib_EnableRelativePosition</a> (<a class="el" href="wii__lib_8h.html#a90cbcd881a70e1fde0306efb5228fdf3">WiiLib_Device</a> *device)</td></tr>
<tr class="memdesc:aa178a16f4a1bce3804a80f0ee01e45ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simple wrapper to handle enabling of relative positioning.  <a href="#aa178a16f4a1bce3804a80f0ee01e45ee">More...</a><br /></td></tr>
<tr class="separator:aa178a16f4a1bce3804a80f0ee01e45ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af16378bd3e846732d475d8ae5966bd52"><td class="memItemLeft" align="right" valign="top"><a class="el" href="wii__lib_8h.html#ad1e7b3ff86d03947a332cd82be615a02">WII_LIB_RC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wii__lib_8c.html#af16378bd3e846732d475d8ae5966bd52">WiiLib_DisableRelativePosition</a> (<a class="el" href="wii__lib_8h.html#a90cbcd881a70e1fde0306efb5228fdf3">WiiLib_Device</a> *device)</td></tr>
<tr class="memdesc:af16378bd3e846732d475d8ae5966bd52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simple wrapper to handle enabling of relative positioning.  <a href="#af16378bd3e846732d475d8ae5966bd52">More...</a><br /></td></tr>
<tr class="separator:af16378bd3e846732d475d8ae5966bd52"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implements functions used to abstract away interacting with Wii devices over I2C. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a142d45ef18cbb69d8ffd2cfac5f591a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a142d45ef18cbb69d8ffd2cfac5f591a5">&#9670;&nbsp;</a></span>WiiLib_ConfigureDevice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="wii__lib_8h.html#ad1e7b3ff86d03947a332cd82be615a02">WII_LIB_RC</a> WiiLib_ConfigureDevice </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="wii__lib_8h.html#a90cbcd881a70e1fde0306efb5228fdf3">WiiLib_Device</a> *&#160;</td>
          <td class="paramname"><em>device</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pushes out configuration to target device. </p>
<p>Initializes target device in an encrypted or decrypted state based on the configuration flags in the provided device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*device</td><td>Instance of 'WiiLib_Device{}' defining target device interaction.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return code corresponding to an entry in the 'WII_LIB_RC' enum (zero == success; non-zero == error code). Please see enum definition for details. </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="wii__lib_8c_a142d45ef18cbb69d8ffd2cfac5f591a5_icgraph.png" border="0" usemap="#wii__lib_8c_a142d45ef18cbb69d8ffd2cfac5f591a5_icgraph" alt=""/></div>
<!-- MAP 1 -->
</div>

</div>
</div>
<a id="a351e727ad63aec8dd05b8209ffa44adf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a351e727ad63aec8dd05b8209ffa44adf">&#9670;&nbsp;</a></span>WiiLib_ConnectToTarget()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="wii__lib_8h.html#ad1e7b3ff86d03947a332cd82be615a02">WII_LIB_RC</a> WiiLib_ConnectToTarget </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="wii__lib_8h.html#a90cbcd881a70e1fde0306efb5228fdf3">WiiLib_Device</a> *&#160;</td>
          <td class="paramname"><em>device</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attempts to connect to target device. </p>
<p>Pushes out initialization messages to target device. If device ack's messages, attempts to validate the target ID. If successful, device is up and running, but before exiting the function, grabs the initial device status (queries WII_LIB_PARAM_STATUS).</p>
<dl class="section note"><dt>Note</dt><dd>Only attempts to connect once. Repeated connectoin attempts (and any desired delays) should be handled by caller.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*device</td><td>Instance of 'WiiLib_Device{}' to utilize.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return code corresponding to an entry in the 'WII_LIB_RC' enum (zero == success; non-zero == error code). Please see enum definition for details. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="wii__lib_8c_a351e727ad63aec8dd05b8209ffa44adf_cgraph.png" border="0" usemap="#wii__lib_8c_a351e727ad63aec8dd05b8209ffa44adf_cgraph" alt=""/></div>
<!-- MAP 2 -->
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="wii__lib_8c_a351e727ad63aec8dd05b8209ffa44adf_icgraph.png" border="0" usemap="#wii__lib_8c_a351e727ad63aec8dd05b8209ffa44adf_icgraph" alt=""/></div>
<!-- MAP 3 -->
</div>

</div>
</div>
<a id="aa69c759411925b0982a02da32c85890e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa69c759411925b0982a02da32c85890e">&#9670;&nbsp;</a></span>WiiLib_Decrypt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="wii__lib_8h.html#ad1e7b3ff86d03947a332cd82be615a02">WII_LIB_RC</a> WiiLib_Decrypt </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles the process of decrypting data received from a target device. </p>
<p>Executes the following to decrypt:</p><ul>
<li>x = (x [xor] 0x17) + 0x17</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*data</td><td>Pointer to data to decrypt. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Number of bytes of data to decrypt.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return code corresponding to an entry in the 'WII_LIB_RC' enum (zero == success; non-zero == error code). Please see enum definition for details. </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="wii__lib_8c_aa69c759411925b0982a02da32c85890e_icgraph.png" border="0" usemap="#wii__lib_8c_aa69c759411925b0982a02da32c85890e_icgraph" alt=""/></div>
<!-- MAP 4 -->
</div>

</div>
</div>
<a id="a88416ab373070607a6f41dee57f2d517"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88416ab373070607a6f41dee57f2d517">&#9670;&nbsp;</a></span>WiiLib_DetermineDeviceType()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="wii__lib_8h.html#ac6864ade60c65429fd5ab9740930d08c">WII_LIB_TARGET_DEVICE</a> WiiLib_DetermineDeviceType </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="wii__lib_8h.html#a90cbcd881a70e1fde0306efb5228fdf3">WiiLib_Device</a> *&#160;</td>
          <td class="paramname"><em>device</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles the process of decrypting data received from a target device. </p>
<p>Queries the device for it's identifier by writing 'WII_LIB_PARAM_DEVICE_TYPE' to the target and reading back the 6-byte value. The value is decrypted if necessary before then comparing it against the expected ID values.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*device</td><td>Instance of 'WiiLib_Device{}'.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Entry from 'WII_LIB_TARGET_DEVICE{}' that represents the target device determined. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="wii__lib_8c_a88416ab373070607a6f41dee57f2d517_cgraph.png" border="0" usemap="#wii__lib_8c_a88416ab373070607a6f41dee57f2d517_cgraph" alt=""/></div>
<!-- MAP 5 -->
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="wii__lib_8c_a88416ab373070607a6f41dee57f2d517_icgraph.png" border="0" usemap="#wii__lib_8c_a88416ab373070607a6f41dee57f2d517_icgraph" alt=""/></div>
<!-- MAP 6 -->
</div>

</div>
</div>
<a id="af16378bd3e846732d475d8ae5966bd52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af16378bd3e846732d475d8ae5966bd52">&#9670;&nbsp;</a></span>WiiLib_DisableRelativePosition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="wii__lib_8h.html#ad1e7b3ff86d03947a332cd82be615a02">WII_LIB_RC</a> WiiLib_DisableRelativePosition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="wii__lib_8h.html#a90cbcd881a70e1fde0306efb5228fdf3">WiiLib_Device</a> *&#160;</td>
          <td class="paramname"><em>device</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Simple wrapper to handle enabling of relative positioning. </p>
<dl class="section note"><dt>Note</dt><dd>No values interface tracking values are modified by this function. This function sole aim is to wrap the enable/disable flag for if relative position information is tracked and calculated.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*device</td><td>Instance of 'WiiLib_Device{}'.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return code corresponding to an entry in the 'WII_LIB_RC' enum (zero == success; non-zero == error code). Please see enum definition for details. </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="wii__lib_8c_af16378bd3e846732d475d8ae5966bd52_icgraph.png" border="0" usemap="#wii__lib_8c_af16378bd3e846732d475d8ae5966bd52_icgraph" alt=""/></div>
<!-- MAP 7 -->
</div>

</div>
</div>
<a id="aa178a16f4a1bce3804a80f0ee01e45ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa178a16f4a1bce3804a80f0ee01e45ee">&#9670;&nbsp;</a></span>WiiLib_EnableRelativePosition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="wii__lib_8h.html#ad1e7b3ff86d03947a332cd82be615a02">WII_LIB_RC</a> WiiLib_EnableRelativePosition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="wii__lib_8h.html#a90cbcd881a70e1fde0306efb5228fdf3">WiiLib_Device</a> *&#160;</td>
          <td class="paramname"><em>device</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Simple wrapper to handle enabling of relative positioning. </p>
<dl class="section note"><dt>Note</dt><dd>No values interface tracking values are modified by this function. This function sole aim is to wrap the enable/disable flag for if relative position information is tracked and calculated.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*device</td><td>Instance of 'WiiLib_Device{}'.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return code corresponding to an entry in the 'WII_LIB_RC' enum (zero == success; non-zero == error code). Please see enum definition for details. </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="wii__lib_8c_aa178a16f4a1bce3804a80f0ee01e45ee_icgraph.png" border="0" usemap="#wii__lib_8c_aa178a16f4a1bce3804a80f0ee01e45ee_icgraph" alt=""/></div>
<!-- MAP 8 -->
</div>

</div>
</div>
<a id="a39366dd2388ce824b8307ea8158eab1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39366dd2388ce824b8307ea8158eab1d">&#9670;&nbsp;</a></span>WiiLib_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="wii__lib_8h.html#ad1e7b3ff86d03947a332cd82be615a02">WII_LIB_RC</a> WiiLib_Init </td>
          <td>(</td>
          <td class="paramtype">I2C_MODULE&#160;</td>
          <td class="paramname"><em>module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>pbClk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="wii__lib_8h.html#ac6864ade60c65429fd5ab9740930d08c">WII_LIB_TARGET_DEVICE</a>&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BOOL&#160;</td>
          <td class="paramname"><em>decryptData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="wii__lib_8h.html#a90cbcd881a70e1fde0306efb5228fdf3">WiiLib_Device</a> *&#160;</td>
          <td class="paramname"><em>device</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the Wii target device (e.g. nunchuck). </p>
<p>Initializes the I2C bus and pushes initialization messages to target device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">module</td><td>Which I2C module (port) to use(e.g. I2C1) when communicating to target device. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pbClk</td><td>Current peripheral bus clock for device (referenced during I2C initialization). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">target</td><td>Target type. Should be of type 'WII_LIB_TARGET_DEVICE'. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">decryptData</td><td>Boolean flag indicating if data should be initialized as deecrypted. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*device</td><td>Instance of 'WiiLib_Device{}' to populate/utilize.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return code corresponding to an entry in the 'WII_LIB_RC' enum (zero == success; non-zero == error code). Please see enum definition for details. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="wii__lib_8c_a39366dd2388ce824b8307ea8158eab1d_cgraph.png" border="0" usemap="#wii__lib_8c_a39366dd2388ce824b8307ea8158eab1d_cgraph" alt=""/></div>
<!-- MAP 9 -->
</div>

</div>
</div>
<a id="ae4aaae06500be0c8bfb9b12f05752f48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4aaae06500be0c8bfb9b12f05752f48">&#9670;&nbsp;</a></span>WiiLib_PollStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="wii__lib_8h.html#ad1e7b3ff86d03947a332cd82be615a02">WII_LIB_RC</a> WiiLib_PollStatus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="wii__lib_8h.html#a90cbcd881a70e1fde0306efb5228fdf3">WiiLib_Device</a> *&#160;</td>
          <td class="paramname"><em>device</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Refreshes tracking values for the target device's status bits. </p>
<p>Uses the '<a class="el" href="wii__lib_8c.html#a3f1a4a0b9edfea52390b8bf07a9fef1f" title="Hanldes process of initiating and reading the response for querying a parameter value from the target...">WiiLib_QueryParameter()</a>' to execute a query for 'WII_LIB_PARAM_STATUS' and store the result within the buffer in the 'device-&gt;dataCurrent[]' buffer.</p>
<dl class="section note"><dt>Note</dt><dd>This is mainly meant to serve as a simple wrapper to make it easier for app development to not need to know much about the internals of the I2C query process.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*device</td><td>Instance of 'WiiLib_Device{}'.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return code corresponding to an entry in the 'WII_LIB_RC' enum (zero == success; non-zero == error code). Please see enum definition for details. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="wii__lib_8c_ae4aaae06500be0c8bfb9b12f05752f48_cgraph.png" border="0" usemap="#wii__lib_8c_ae4aaae06500be0c8bfb9b12f05752f48_cgraph" alt=""/></div>
<!-- MAP 10 -->
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="wii__lib_8c_ae4aaae06500be0c8bfb9b12f05752f48_icgraph.png" border="0" usemap="#wii__lib_8c_ae4aaae06500be0c8bfb9b12f05752f48_icgraph" alt=""/></div>
<!-- MAP 11 -->
</div>

</div>
</div>
<a id="a3f1a4a0b9edfea52390b8bf07a9fef1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f1a4a0b9edfea52390b8bf07a9fef1f">&#9670;&nbsp;</a></span>WiiLib_QueryParameter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="wii__lib_8h.html#ad1e7b3ff86d03947a332cd82be615a02">WII_LIB_RC</a> WiiLib_QueryParameter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="wii__lib_8h.html#a90cbcd881a70e1fde0306efb5228fdf3">WiiLib_Device</a> *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="wii__lib_8h.html#a58a6ebe9b45f82cd1a973f2b83dfcf70">WII_LIB_PARAM</a>&#160;</td>
          <td class="paramname"><em>param</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Hanldes process of initiating and reading the response for querying a parameter value from the target device. </p>
<p>Verifies the parameter requested is supported [a known parameter] before utilizing temporary buffers to request and read data over the I2C bus. If the data is read correctly (valid reply, decrypted appropriately, etc.), the results are copied into the 'device-&gt;dataCurrent[]' before returning success.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*device</td><td>Instance of 'WiiLib_Device{}' defining target device interaction. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">param</td><td>Parameter value to query. Must match one of the supported values defined in the 'WII_LIB_PARAM{}' enum.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return code corresponding to an entry in the 'WII_LIB_RC' enum (zero == success; non-zero == error code). Please see enum definition for details. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="wii__lib_8c_a3f1a4a0b9edfea52390b8bf07a9fef1f_cgraph.png" border="0" usemap="#wii__lib_8c_a3f1a4a0b9edfea52390b8bf07a9fef1f_cgraph" alt=""/></div>
<!-- MAP 12 -->
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="wii__lib_8c_a3f1a4a0b9edfea52390b8bf07a9fef1f_icgraph.png" border="0" usemap="#wii__lib_8c_a3f1a4a0b9edfea52390b8bf07a9fef1f_icgraph" alt=""/></div>
<!-- MAP 13 -->
</div>

</div>
</div>
<a id="a97062879138116ad48b5fd89682d6c48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97062879138116ad48b5fd89682d6c48">&#9670;&nbsp;</a></span>WiiLib_SetNewHomePosition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="wii__lib_8h.html#ad1e7b3ff86d03947a332cd82be615a02">WII_LIB_RC</a> WiiLib_SetNewHomePosition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="wii__lib_8h.html#a90cbcd881a70e1fde0306efb5228fdf3">WiiLib_Device</a> *&#160;</td>
          <td class="paramname"><em>device</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Refreshes tracking values for the target device's status bits. </p>
<p>Uses the '<a class="el" href="wii__lib_8c.html#a3f1a4a0b9edfea52390b8bf07a9fef1f" title="Hanldes process of initiating and reading the response for querying a parameter value from the target...">WiiLib_QueryParameter()</a>' to execute a query for 'WII_LIB_PARAM_STATUS' and store the result within the buffer in the 'device-&gt;dataBaseline[]' buffer.</p>
<dl class="section note"><dt>Note</dt><dd>This is mainly meant to serve as a simple wrapper to make it easier for app development to not need to know much about the internals of the I2C query process.</dd>
<dd>
This could be handled more efficiently, but presently focused on encapsulation and not too worried about the secondary memcpy() event.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*device</td><td>Instance of 'WiiLib_Device{}'.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return code corresponding to an entry in the 'WII_LIB_RC' enum (zero == success; non-zero == error code). Please see enum definition for details. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="wii__lib_8c_a97062879138116ad48b5fd89682d6c48_cgraph.png" border="0" usemap="#wii__lib_8c_a97062879138116ad48b5fd89682d6c48_cgraph" alt=""/></div>
<!-- MAP 14 -->
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="wii__lib_8c_a97062879138116ad48b5fd89682d6c48_icgraph.png" border="0" usemap="#wii__lib_8c_a97062879138116ad48b5fd89682d6c48_icgraph" alt=""/></div>
<!-- MAP 15 -->
</div>

</div>
</div>
<a id="aad241b45d69099b34e33ce9d56f8ecdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad241b45d69099b34e33ce9d56f8ecdd">&#9670;&nbsp;</a></span>WiiLib_UpdateInterfaceTracking()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="wii__lib_8h.html#ad1e7b3ff86d03947a332cd82be615a02">WII_LIB_RC</a> WiiLib_UpdateInterfaceTracking </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="wii__lib_8h.html#a90cbcd881a70e1fde0306efb5228fdf3">WiiLib_Device</a> *&#160;</td>
          <td class="paramname"><em>device</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wrapper to invoke the appropriate target-specific processing function to interpret the current status data. </p>
<dl class="section note"><dt>Note</dt><dd>Presumes data available in 'device-&gt;dataCurrent[]' is a valid payload from querying status data.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*device</td><td>Instance of 'WiiLib_Device{}'.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Entry from 'WII_LIB_TARGET_DEVICE{}' that represents the target device determined. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="wii__lib_8c_aad241b45d69099b34e33ce9d56f8ecdd_cgraph.png" border="0" usemap="#wii__lib_8c_aad241b45d69099b34e33ce9d56f8ecdd_cgraph" alt=""/></div>
<!-- MAP 16 -->
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="wii__lib_8c_aad241b45d69099b34e33ce9d56f8ecdd_icgraph.png" border="0" usemap="#wii__lib_8c_aad241b45d69099b34e33ce9d56f8ecdd_icgraph" alt=""/></div>
<!-- MAP 17 -->
</div>

</div>
</div>
<a id="a975203344b3223270889adfe8bc28b14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a975203344b3223270889adfe8bc28b14">&#9670;&nbsp;</a></span>WiiLib_ValidateDataReceived()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static BOOL WiiLib_ValidateDataReceived </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Verifies the data provided is not a known set of invalid byte(s). </p>
<p>Confirms data is ready was ready to be read from the target device (did not receive all 0xFF bytes) and returns the result. Long term, any error codes can and should be checked by this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*data</td><td>Pointer to data to validate. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Number of bytes of data to validate.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">TRUE</td><td>Data is valid. </td></tr>
    <tr><td class="paramname">TRUE</td><td>Data is not valid. </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="wii__lib_8c_a975203344b3223270889adfe8bc28b14_icgraph.png" border="0" usemap="#wii__lib_8c_a975203344b3223270889adfe8bc28b14_icgraph" alt=""/></div>
<!-- MAP 18 -->
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="wii__lib_8c.html">wii_lib.c</a></li>
    <li class="footer">Generated on Thu Nov 8 2018 00:00:13 for Wii Library by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
